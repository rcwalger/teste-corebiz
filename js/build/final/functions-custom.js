"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var LocalStorageCache=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;_classCallCheck(this,e),this.localStorage=window.localStorage,this.key=t,this.xpirationInHours=r,this.timeCache=this.getTime()}return _createClass(e,[{key:"setItems",value:function(e){try{this.localStorage.setItem(this.key,JSON.stringify({time:(new Date).getTime(),items:e}))}catch(t){window.localStorage.clear();try{this.localStorage.setItem(this.key,JSON.stringify({time:(new Date).getTime(),items:e}))}catch(e){console.log(e)}}}},{key:"getItems",value:function(){return this.timeCache?JSON.parse(this.localStorage.getItem(this.key)).items:null}},{key:"getItemsIfNotExpired",value:function(){return this.hasExpired()?null:this.getItems()}},{key:"getTime",value:function(){var e=JSON.parse(this.localStorage.getItem(this.key));return e?e.time:null}},{key:"hasExpired",value:function(){if(!this.timeCache)return!0;return((new Date).getTime()-this.timeCache)/36e5>this.xpirationInHours}}]),e}();function refreshMiniCart(e){var t=new LocalStorageCache("itens-cart"),r=t.getItems();null==r&&(r=[]),e&&r.push(e),t.setItems(r),$("#header-minicart__count").text(r.length)}function ProductImage(e){var t=e.listPrice,r=e.price,n=null!=t&&t>=r;return React.createElement("div",{className:"shelf-image"},n&&React.createElement("div",{className:"shelf-discount"},React.createElement("span",null,"OFF")),React.createElement("img",{src:e.imageUrl,alt:e.productName,loading:"lazy"}))}function ProductName(e){return React.createElement("h2",{className:"shelf-name"},e.productName)}function ProductRatingItem(e){return React.createElement("li",{className:"shelf-rating__item"},e.fill?React.createElement("svg",{width:"12",height:"11",viewBox:"0 0 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.69478 8.68583L9.21415 10.649L8.28021 6.94899L11.3896 4.45951L7.29501 4.13846L5.69478 0.648987L4.09454 4.13846L0 4.45951L3.10935 6.94899L2.17541 10.649L5.69478 8.68583Z",fill:"#F8475F"})):React.createElement("svg",{width:"12",height:"11",viewBox:"0 0 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.3896 4.4595L7.29501 4.13318L5.69478 0.648972L4.09454 4.13845L0 4.4595L3.10935 6.94897L2.17541 10.649L5.69478 8.68581L9.21415 10.649L8.2859 6.94897L11.3896 4.4595ZM5.69477 7.70161L3.55353 8.89634L4.12301 6.64371L2.23234 5.12792L4.72666 4.92792L5.69477 2.80687L6.66857 4.93319L9.16289 5.13319L7.27222 6.64897L7.8417 8.90161L5.69477 7.70161Z",fill:"#F8475F"})))}function ProductRating(e){for(var t=[],r=0;r<5;r++)t.push(React.createElement(ProductRatingItem,{fill:r<=e.stars}));return React.createElement("ul",{className:"shelf-rating"},t)}function ListPrice(e){var t=e.listPrice,r=e.price,n=null!=t&&t>=r;return React.createElement("div",{className:"shelf-listPrice"},n&&"de ",t)}function BestPrice(e){var t=e.listPrice,r=e.price,n=null!=t&&t>=r;return React.createElement("div",{className:"shelf-bestPrice"},n&&"por ",e.price)}function Installments(e){var t=e.installments;return React.createElement("div",{className:"shelf-installments"},null!=t&&"ou ".concat(t.quantity,"x de ").concat(e.numberToReal(t.value)))}$("#overlay").click((function(){$(".minicart").removeClass("opened"),$("body").removeClass("show-overlay")}));var ProductPrice=function(e){_inherits(r,React.Component);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"numberToReal",value:function(e){if(null!=e)return"R$ "+(e=(e=(e=(e=e.toString().replace(/\D/g,"")).toString().replace(/(\d)(\d{8})$/,"$1.$2")).toString().replace(/(\d)(\d{5})$/,"$1.$2")).toString().replace(/(\d)(\d{2})$/,"$1,$2"))}},{key:"bestInstallments",value:function(e){var t=e;return e.length>0&&e.forEach((function(e){e.quantity===t.quantity?e.value<t.value&&(t=e):e.quantity>t.quantity&&(t=e)})),t=0==t.length?null:t[0]}},{key:"render",value:function(){var e=this.numberToReal(this.props.listPrice),t=this.numberToReal(this.props.price),r=this.bestInstallments(this.props.installments);return React.createElement("div",{className:"shelf-price"},React.createElement(ListPrice,{listPrice:e,price:t}),React.createElement(BestPrice,{listPrice:e,price:t}),React.createElement(Installments,{installments:r,numberToReal:this.numberToReal}))}}]),r}(),ProductBuy=function(e){_inherits(r,React.Component);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this,e)).state={itemExistInCart:!1},n.handleAddToCart=n.handleAddToCart.bind(_assertThisInitialized(n)),n}return _createClass(r,[{key:"createLoading",value:function(e){$(e).addClass("loading"),setTimeout((function(){$(e).removeClass("loading").addClass("selected").text("Comprado")}),1e3)}},{key:"checkProductsInCart",value:function(){var e=new LocalStorageCache("itens-cart").getItems(),t=this.props.product.productId,r=e.some((function(e){return e.productId===t}));this.setState({itemExistInCart:r})}},{key:"handleAddToCart",value:function(e){this.state.itemExistInCart||refreshMiniCart(this.props.product);this.createLoading(e.target)}},{key:"componentWillMount",value:function(){this.checkProductsInCart()}},{key:"render",value:function(){var e=this.state.itemExistInCart;return React.createElement("div",{className:"shelf-productBuy ".concat(e?"selected":""),onClick:this.handleAddToCart},e?"Comprado":"Comprar")}}]),r}(),Grid=function(e){_inherits(r,React.Component);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"render",value:function(){var e=this.props.product;return React.createElement("li",{className:"shelf-item","product-id":e.productId},React.createElement(ProductImage,{listPrice:e.listPrice,price:e.price,imageUrl:e.imageUrl,productName:e.productName}),React.createElement("div",{className:"shelf-infos"},React.createElement(ProductName,{productName:e.productName}),React.createElement(ProductRating,{stars:e.stars}),React.createElement(ProductPrice,{listPrice:e.listPrice,price:e.price,installments:e.installments}),React.createElement(ProductBuy,{product:e})))}}]),r}(),Minicart=function(e){_inherits(r,React.Component);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"render",value:function(){var e=this.props.products;return React.createElement(React.Fragment,null,e.map((function(e){return React.createElement(Grid,{product:e})})))}}]),r}();function openMiniCart(){var e=$(".minicart");e.hasClass("opened")?(e.removeClass("opened"),$("body").removeClass("show-overlay")):(e.addClass("opened"),$("body").addClass("show-overlay"))}$(document).on("click",".header-minicart",(function(){$(".shelf-item").removeClass("itemRemoved");var e=new LocalStorageCache("itens-cart"),t=e.getItems();null==t&&(t=[]),e.setItems(t);var r=document.getElementById("js-react-MiniCartList");null!=r&&ReactDOM.render(React.createElement(Minicart,{products:t}),r),openMiniCart()})),$(".minicart-header__cleanCart").click((function(){new LocalStorageCache("itens-cart").setItems([]),$("#header-minicart__count").text("0"),$(".shelf-item").addClass("itemRemoved"),$(".shelf-productBuy").removeClass("selected").text("Comprar"),setTimeout((function(){$(".minicart").removeClass("opened"),$("body").removeClass("show-overlay")}),500)})),$(document).ready((function(){refreshMiniCart()}));